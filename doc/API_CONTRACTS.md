# DeadLine - API –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –ê—É–¥–∏—Ç

## –û–±–∑–æ—Ä
–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –±–æ–ª–µ–µ 70 API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∑–∞–¥–∞—á–∏, –ø—Ä–æ–µ–∫—Ç—ã, AI-—Ñ—É–Ω–∫—Ü–∏–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ.

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ API

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Auth)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/auth/[...auth]`
- **–ú–µ—Ç–æ–¥—ã:** GET, POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Better Auth
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–æ Better Auth)
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 401, 500

### üìã –ó–∞–¥–∞—á–∏ (Tasks)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/tasks`
- **–ú–µ—Ç–æ–¥—ã:** GET, POST, PATCH, DELETE
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** Mock –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 400, 404, 500

#### –ü—Ä–æ–±–ª–µ–º—ã:
```typescript
// –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
export async function GET(request: NextRequest) {
  // –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ session!
  return NextResponse.json(demoTasks);
}
```

### üèóÔ∏è –ü—Ä–æ–µ–∫—Ç—ã (Projects)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/projects`
- **–ú–µ—Ç–æ–¥—ã:** GET, POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –†–µ–∞–ª—å–Ω–∞—è –ë–î —á–µ—Ä–µ–∑ ProjectService
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 400, 401, 500

### ü§ñ AI –§—É–Ω–∫—Ü–∏–∏ (26 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

#### AI Create Task (`/api/ai/create-task`)
- **–ú–µ—Ç–æ–¥—ã:** POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ë–∞–∑–æ–≤–∞—è (title, projectId)
- **AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ Vasily AI –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∑–∞–¥–∞—á
- **–ë–î:** ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ issue —Ç–∞–±–ª–∏—Ü—É
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 400, 401, 404, 500

#### AI Ask (`/api/ai/ask`)
- **–ú–µ—Ç–æ–¥—ã:** POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ë–∞–∑–æ–≤–∞—è (query)
- **AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ Vasily + –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á
- **–ë–î:** ‚úÖ –ó–∞–ø–∏—Å—å –≤ aiConversation
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 400, 401, 500

#### AI Code Generation (`/api/ai/code-generation`)
- **–ú–µ—Ç–æ–¥—ã:** POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ë–∞–∑–æ–≤–∞—è —á–µ—Ä–µ–∑ action
- **AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ AICodeGenerationInstance
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 400, 500

#### AI Auto Documentation (`/api/ai/auto-documentation`)
- **–ú–µ—Ç–æ–¥—ã:** GET, POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ AutoDocumentation
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 500

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Analytics)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** `/api/analytics/*` (5 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- **–ú–µ—Ç–æ–¥—ã:** GET
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–ë–î:** –ó–∞–ø—Ä–æ—Å—ã –∫ –º–µ—Ç—Ä–∏–∫–∞–º
- **–°—Ç–∞—Ç—É—Å—ã:** 200, 500

### üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Integrations)
- **GitHub:** `/api/integrations/github/*` (4 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)
- **Jira:** `/api/integrations/jira/sync`
- **Slack:** `/api/integrations/slack/*` (3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### üéØ –î–æ—Å–∫–∏ (Boards)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** `/api/boards/*` (10+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- **–ú–µ—Ç–æ–¥—ã:** GET, POST, PUT, DELETE
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–æ—É—Ç–∞—Ö
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ß–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–ë–î:** ‚úÖ –†–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å board —Ç–∞–±–ª–∏—Ü–∞–º–∏

### ‚ö° Real-time –∏ WebSocket
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** `/api/realtime/*`, `/api/websocket/*`, `/api/ws`
- **–ú–µ—Ç–æ–¥—ã:** GET, POST
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚ùå –ù–ï–¢
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **WebSocket:** Socket.io –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö API
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ä–æ—É—Ç—ã:** ~40+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```typescript
// –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ä–æ—É—Ç—ã:
- /api/tasks (CRUD –±–µ–∑ auth)
- /api/analytics/* (—á—Ç–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –±–µ–∑ auth)
- /api/ai/* (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ AI —Ä–æ—É—Ç–æ–≤)
- /api/integrations/* (–≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- /api/realtime/* (real-time –¥–∞–Ω–Ω—ã–µ)
```

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–æ—É—Ç–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Zod –∏–ª–∏ –¥—Ä—É–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
```typescript
// –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:
const { query, workspaceId, projectId } = await request.json();
// –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π, sanitization
```

#### 3. Mock –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ä–æ—É—Ç—ã:**
- `/api/tasks` - –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
- –í–æ–∑–º–æ–∂–Ω–æ –¥—Ä—É–≥–∏–µ —Ä–æ—É—Ç—ã —Å demo/mock –¥–∞–Ω–Ω—ã–º–∏

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 4. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö
```typescript
// –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
return NextResponse.json({ error: "Internal server error" }, { status: 500 });
// vs
return ValidationService.createErrorResponse('Failed to fetch', 500);
```

#### 5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç abuse –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö API

#### 6. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSON.parse
```typescript
// –í /api/ai/create-task/route.ts:95
const aiEstimation = JSON.parse(aiResponse);
// –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ JSON –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (Critical)
1. **–î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–æ –≤—Å–µ–º API —Ä–æ—É—Ç–∞–º**
2. **–£–±—Ä–∞—Ç—å mock –¥–∞–Ω–Ω—ã–µ –∏–∑ /api/tasks**
3. **–î–æ–±–∞–≤–∏—Ç—å Zod –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è (High)
1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
2. **–î–æ–±–∞–≤–∏—Ç—å rate limiting**
3. **–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å JSON.parse —Å try/catch**

### –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (Medium)
1. **–î–æ–±–∞–≤–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (OpenAPI/Swagger)**
2. **–í–Ω–µ–¥—Ä–∏—Ç—å API versioning**
3. **–î–æ–±–∞–≤–∏—Ç—å comprehensive logging**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ API

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–≤–µ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
```typescript
// Success
{
  data: T,
  meta?: {
    pagination?: { page: number, limit: number, total: number },
    timestamp: string
  }
}

// Error
{
  error: {
    code: string,
    message: string,
    details?: any
  },
  meta: { timestamp: string }
}
```

### –¢–µ–∫—É—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```typescript
// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:
const session = await auth.api.getSession({ headers: request.headers });
if (!session) {
  return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
}

// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç):
export async function GET(request: NextRequest) {
  // –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏!
}
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ API

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ—É—Ç–æ–≤:** 70+
- **–†–æ—É—Ç–æ–≤ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:** ~40 (57%)
- **–†–æ—É—Ç–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:** ~10 (14%)
- **–†–æ—É—Ç–æ–≤ —Å mock –¥–∞–Ω–Ω—ã–º–∏:** 1+ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:** 3
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** 3
- **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** 3

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å mock –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ë–î
3. –í–Ω–µ–¥—Ä–∏—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å comprehensive API testing
5. –°–æ–∑–¥–∞—Ç—å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
